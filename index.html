<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generator - K.K. ENTERPRISES</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- jsPDF core library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- jsPDF autoTable plugin for creating tables -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .no-print { display: none; }
            #invoice-container {
                box-shadow: none;
                margin: 0;
                max-width: 100%;
                border: none;
            }
        }
        input, textarea {
            border: 1px solid #d1d5db;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            transition: border-color 0.2s, box-shadow 0.2s;
            width: 100%;
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.4);
        }
        .details-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.5rem 1rem;
            align-items: center;
        }
        .details-grid label {
            font-weight: 500;
            text-align: right;
        }
        /* Auto-resize textarea */
        textarea.autoresize {
            min-height: 42px; /* Same as input */
            resize: vertical;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-6 md:p-8">
    <div class="max-w-4xl mx-auto bg-white p-6 sm:p-8 md:p-10 rounded-2xl shadow-lg" id="invoice-container">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex justify-between items-start mb-2">
                <p class="text-xs font-semibold text-gray-700">GSTIN: <span class="font-mono">09CGWPS1563C1ZX</span></p>
                <h2 class="text-2xl font-bold text-gray-800">TAX INVOICE</h2>
                <p class="text-xs font-semibold text-gray-700">M.: <span class="font-mono">9565898222</span></p>
            </div>
            <div class="text-center">
                <h1 class="text-3xl font-bold text-red-500">K. K. ENTERPRISES</h1>
                <p class="text-sm text-blue-800 font-semibold mt-1">Deals In: Operative Microscope, Micro Debrider, Endoscope, Surgical Camera, OPD Camera,<br> Light Source, Endoscopy Head light & Instruments</p>
                <p class="text-sm text-gray-500 mt-2">D3/389, Sec -H, LDA Colony, Kanpur Road, Lucknow-226012, U.P. | E-mail: kkent3393@gmail.com</p>
            </div>
        </header>

        <div class="w-full mb-6 pb-2 border-b-2 border-gray-400"></div>


        <!-- Bill To and Invoice Details -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <div class="p-4 rounded-lg details-grid md:border-r md:pr-8">
                <label for="customer-name">Name:</label>
                <input type="text" id="customer-name" placeholder="Customer Name">
                <label for="customer-address">Add.:</label>
                <textarea id="customer-address" placeholder="Customer Address" rows="3"></textarea>
                <label for="customer-gstin">GSTIN:</label>
                <input type="text" id="customer-gstin" placeholder="Customer GSTIN">
                <label for="customer-state">State:</label>
                 <div class="flex gap-2">
                    <input type="text" id="customer-state" placeholder="State" class="w-2/3">
                    <input type="text" id="customer-state-code" placeholder="Code" class="w-1/3">
                </div>
            </div>
            <div class="p-4 rounded-lg details-grid">
                <label for="invoice-no">No.:</label>
                <input type="text" id="invoice-no">
                <label for="invoice-date">Date:</label>
                <input type="date" id="invoice-date">
                <label for="order-no">Order No.:</label>
                <input type="text" id="order-no">
                <label for="eway-bill">E-Way Bill:</label>
                <input type="text" id="eway-bill">
            </div>
        </section>

        <!-- Items Table -->
        <div class="w-full mb-4 border-b border-gray-300"></div>
        <section class="mb-8">
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left text-gray-500">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                        <tr>
                            <th scope="col" class="px-4 py-3 w-12">S.No.</th>
                            <th scope="col" class="px-4 py-3">Description</th>
                            <th scope="col" class="px-4 py-3">HSN/SAC</th>
                            <th scope="col" class="px-4 py-3">Qty</th>
                            <th scope="col" class="px-4 py-3">Rate</th>
                            <th scope="col" class="px-4 py-3 text-right">Amount</th>
                            <th scope="col" class="px-4 py-3 w-16 no-print">Action</th>
                        </tr>
                    </thead>
                    <tbody id="invoice-items">
                        <!-- Rows will be added here by JavaScript -->
                    </tbody>
                </table>
            </div>
            <button id="add-row-btn" class="mt-4 no-print bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm">+ Add Item</button>
        </section>

        <!-- Totals & Footer -->
        <footer class="pt-6 border-t-2 border-gray-400">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                 <!-- Left side: Bank Details & Terms -->
                <div>
                     <div class="mb-6">
                        <p id="amount-in-words" class="font-semibold text-gray-800">-</p>
                     </div>
                    <h4 class="font-semibold text-gray-800">Bank Details:</h4>
                    <p class="text-sm text-gray-700 font-semibold">K.K. ENTERPRISES</p>
                    <p class="text-sm text-gray-600">A/c No.: <span class="font-medium font-mono">215211100002643</span></p>
                    <p class="text-sm text-gray-600">Bank: <span class="font-medium">UNION BANK OF INDIA, RAEBAREILY ROAD, LUCKNOW, U.P.</span></p>
                    <p class="text-sm text-gray-600">IFSC Code: <span class="font-medium font-mono">UBIN0821527</span></p>
                </div>

                <!-- Right side: Totals -->
                <div>
                    <table class="w-full border border-gray-300">
                        <tbody>
                            <tr class="border-b border-gray-300">
                                <td class="font-semibold text-gray-600 p-2">Total Amount</td>
                                <td class="font-semibold text-gray-800 p-2 text-right" id="subtotal">Rs. 0.00</td>
                            </tr>
                            <tr class="border-b border-gray-300">
                                <td class="font-semibold text-gray-600 p-2">Freight Charge</td>
                                <td class="p-2 text-right"><input type="number" id="freight-charge" value="0.00" class="w-32 text-right border-0 focus:ring-0"></td>
                            </tr>
                             <tr class="border-b border-gray-300">
                                <td class="font-semibold text-gray-600 p-2 flex items-center">Add CGST @ <input type="number" id="cgst-percent" value="2.5" class="w-16 text-right mx-1 border-0 focus:ring-0">%</td>
                                <td class="font-semibold text-gray-800 p-2 text-right" id="cgst-amount">Rs. 0.00</td>
                            </tr>
                            <tr class="border-b border-gray-300">
                                <td class="font-semibold text-gray-600 p-2 flex items-center">Add SGST @ <input type="number" id="sgst-percent" value="2.5" class="w-16 text-right mx-1 border-0 focus:ring-0">%</td>
                                <td class="font-semibold text-gray-800 p-2 text-right" id="sgst-amount">Rs. 0.00</td>
                            </tr>
                            <tr class="border-b border-gray-300">
                                <td class="font-semibold text-gray-600 p-2 flex items-center">Add IGST @ <input type="number" id="igst-percent" value="0" class="w-16 text-right mx-1 border-0 focus:ring-0">%</td>
                                <td class="font-semibold text-gray-800 p-2 text-right" id="igst-amount">Rs. 0.00</td>
                            </tr>
                            <tr class="border-b border-gray-300">
                                <td class="font-semibold text-gray-600 p-2">Round Off</td>
                                <td class="p-2 text-right"><input type="number" id="round-off" value="0.00" step="0.01" class="w-32 text-right border-0 focus:ring-0"></td>
                            </tr>
                             <tr class="bg-gray-100">
                                <td class="font-bold text-gray-900 p-2 text-lg">Grand Total</td>
                                <td id="grand-total" class="font-bold text-blue-600 p-2 text-right text-lg">Rs. 0.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
             <!-- Bottom Section -->
            <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h5 class="font-semibold text-gray-700">Terms & Conditions:</h5>
                    <ol class="list-decimal list-inside text-xs text-gray-500 mt-1 space-y-1">
                        <li>E.&.O.E.</li>
                        <li>Goods once sold will not be taken back.</li>
                        <li>All Disputes are subject to Lucknow Jurisdiction Only.</li>
                    </ol>
                </div>
                <div class="text-center">
                     <p class="font-semibold text-gray-700">For K. K. ENTERPRISES</p>
                     <div class="mt-24 border-t border-gray-400 w-48 mx-auto"></div>
                     <p class="text-sm text-gray-600">Authorised Signatory</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Action Buttons -->
    <div class="max-w-4xl mx-auto mt-6 text-center no-print">
        <button id="generate-pdf-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors shadow-md">
            Generate PDF
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const itemsTableBody = document.getElementById('invoice-items');
            const addRowBtn = document.getElementById('add-row-btn');
            const generatePdfBtn = document.getElementById('generate-pdf-btn');
            
            document.getElementById('invoice-date').valueAsDate = new Date();

            const createRow = () => {
                const rowCount = itemsTableBody.rows.length;
                const row = itemsTableBody.insertRow(rowCount);
                row.innerHTML = `
                    <td class="px-4 py-2 font-medium text-gray-900 text-center">${rowCount + 1}</td>
                    <td class="px-4 py-2"><textarea placeholder="Item Description" class="item-desc autoresize" rows="1"></textarea></td>
                    <td class="px-4 py-2"><input type="text" placeholder="HSN" class="w-24 item-hsn"></td>
                    <td class="px-4 py-2"><input type="number" value="1" min="0" class="w-16 item-qty text-right"></td>
                    <td class="px-4 py-2"><input type="number" value="0.00" min="0" step="0.01" class="w-24 item-rate text-right"></td>
                    <td class="px-4 py-2 font-medium text-right item-amount">Rs. 0.00</td>
                    <td class="px-4 py-2 text-center no-print"><button class="delete-row-btn text-red-500 hover:text-red-700 font-bold">X</button></td>
                `;
                updateRowNumbers();
                const textarea = row.querySelector('.autoresize');
                textarea.addEventListener('input', () => {
                    textarea.style.height = 'auto';
                    textarea.style.height = textarea.scrollHeight + 'px';
                });
            };
            
            const updateRowNumbers = () => {
                const rows = itemsTableBody.getElementsByTagName('tr');
                for (let i = 0; i < rows.length; i++) {
                    rows[i].cells[0].textContent = i + 1;
                }
            };
            
            const numberToWords = (num) => {
                const a = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
                const b = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
                
                if ((num = num.toString()).length > 9) return 'overflow';
                const n = ('000000000' + num).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);
                if (!n) return '';
                let str = '';
                str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + ' crore ' : '';
                str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + ' lakh ' : '';
                str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + ' thousand ' : '';
                str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + ' hundred ' : '';
                str += (n[5] != 0) ? ((str != '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) : '';
                const finalStr = str.trim() + ' rupees only';
                return finalStr.charAt(0).toUpperCase() + finalStr.slice(1);
            };

            const calculateTotals = () => {
                let subtotal = 0;
                const rows = itemsTableBody.getElementsByTagName('tr');
                for (const row of rows) {
                    const qty = parseFloat(row.querySelector('.item-qty').value) || 0;
                    const rate = parseFloat(row.querySelector('.item-rate').value) || 0;
                    const amount = qty * rate;
                    row.querySelector('.item-amount').textContent = `Rs. ${amount.toFixed(2)}`;
                    subtotal += amount;
                }

                document.getElementById('subtotal').textContent = `Rs. ${subtotal.toFixed(2)}`;

                const freight = parseFloat(document.getElementById('freight-charge').value) || 0;
                const taxableAmount = subtotal + freight;

                const cgstPercent = parseFloat(document.getElementById('cgst-percent').value) || 0;
                const sgstPercent = parseFloat(document.getElementById('sgst-percent').value) || 0;
                const igstPercent = parseFloat(document.getElementById('igst-percent').value) || 0;
                const roundOff = parseFloat(document.getElementById('round-off').value) || 0;

                const cgstAmount = taxableAmount * (cgstPercent / 100);
                const sgstAmount = taxableAmount * (sgstPercent / 100);
                const igstAmount = taxableAmount * (igstPercent / 100);

                document.getElementById('cgst-amount').textContent = `Rs. ${cgstAmount.toFixed(2)}`;
                document.getElementById('sgst-amount').textContent = `Rs. ${sgstAmount.toFixed(2)}`;
                document.getElementById('igst-amount').textContent = `Rs. ${igstAmount.toFixed(2)}`;

                const grandTotal = taxableAmount + cgstAmount + sgstAmount + igstAmount + roundOff;
                document.getElementById('grand-total').textContent = `Rs. ${grandTotal.toFixed(2)}`;
                
                const grandTotalInWords = Math.round(grandTotal);
                const amountWordsElement = document.getElementById('amount-in-words');
                if (grandTotalInWords > 0) {
                    amountWordsElement.innerHTML = `<strong>Total Invoice Amount in Words:</strong> ${numberToWords(grandTotalInWords)}`;
                } else {
                    amountWordsElement.textContent = '-';
                }
            };

            addRowBtn.addEventListener('click', createRow);

            itemsTableBody.addEventListener('click', (e) => {
                if (e.target.classList.contains('delete-row-btn')) {
                    e.target.closest('tr').remove();
                    updateRowNumbers();
                    calculateTotals();
                }
            });

            document.getElementById('invoice-container').addEventListener('input', calculateTotals);

            generatePdfBtn.addEventListener('click', () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                const pageMargin = 15;
                const pageWidth = doc.internal.pageSize.getWidth();
                const contentWidth = pageWidth - (pageMargin * 2);
                
                doc.setFont("times");

                // Header
                doc.setFontSize(10);
                doc.setFont("times", "bold");
                doc.text("GSTIN: 09CGWPS1563C1ZX", pageMargin, 12);
                doc.setFontSize(16);
                doc.text("TAX INVOICE", pageWidth / 2, 12, { align: 'center' });
                doc.setFontSize(10);
                doc.text("M.: 9565898222", pageWidth - pageMargin, 12, { align: 'right' });

                doc.setFontSize(22);
                doc.setFont("times", "bold");
                doc.setTextColor('#E53E3E'); // Light Red
                doc.text("K. K. ENTERPRISES", pageWidth / 2, 22, { align: 'center' });
                
                doc.setTextColor('#2C5282'); // Navy Blue
                doc.setFont("times", "bold");
                doc.setFontSize(9);
                const dealsInLine1 = "Deals In: Operative Microscope, Micro Debrider, Endoscope, Surgical Camera, OPD Camera,";
                const dealsInLine2 = "Light Source, Endoscopy Head light & Instruments";
                doc.text(dealsInLine1, pageWidth / 2, 27, { align: 'center' });
                doc.text(dealsInLine2, pageWidth / 2, 31, { align: 'center' });

                
                doc.setTextColor(0, 0, 0); // Reset color to black
                doc.setFont("times", "normal");
                doc.text("D3/389, Sec -H, LDA Colony, Kanpur Road, Lucknow-226012, U.P. | E-mail: kkent3393@gmail.com", pageWidth / 2, 35, { align: 'center' });
                
                doc.setLineWidth(0.5);
                doc.line(pageMargin, 39, pageWidth - pageMargin, 39);
                
                // --- Manual Layout for Customer/Invoice Details ---
                let detailsStartY = 45;
                doc.setFontSize(9);

                // Draw vertical separator line
                doc.setDrawColor(220, 220, 220);
                doc.setLineWidth(0.2);
                doc.line(pageWidth / 2, detailsStartY - 2, pageWidth / 2, detailsStartY + 25);
                
                let leftColX = pageMargin;
                let currentY = detailsStartY;
                const maxLabelWidth = doc.getTextWidth("GSTIN:"); // Find max width for alignment
                const valueStartX = leftColX + maxLabelWidth + 2;

                doc.setFont("times", "bold"); doc.text("Name:", leftColX, currentY);
                doc.setFont("times", "normal"); doc.text(document.getElementById('customer-name').value, valueStartX, currentY);
                currentY += 5;

                doc.setFont("times", "bold"); doc.text("Add.:", leftColX, currentY);
                doc.setFont("times", "normal");
                const addressLines = doc.splitTextToSize(document.getElementById('customer-address').value, contentWidth / 2 - maxLabelWidth - 4);
                doc.text(addressLines, valueStartX, currentY);
                currentY += addressLines.length * 4;

                doc.setFont("times", "bold"); doc.text("GSTIN:", leftColX, currentY);
                doc.setFont("times", "normal"); doc.text(document.getElementById('customer-gstin').value, valueStartX, currentY);
                currentY += 5;

                doc.setFont("times", "bold"); doc.text("State:", leftColX, currentY);
                doc.setFont("times", "normal"); doc.text(`${document.getElementById('customer-state').value} (Code: ${document.getElementById('customer-state-code').value})`, valueStartX, currentY);

                let rightColX = pageWidth / 2 + 5;
                let rightY = detailsStartY;
                const rightMaxLabel = doc.getTextWidth("Order No.:");
                const rightValueStart = rightColX + rightMaxLabel + 2;

                doc.setFont("times", "bold"); doc.text("No.:", rightColX, rightY);
                doc.setFont("times", "normal"); doc.text(document.getElementById('invoice-no').value, rightValueStart, rightY);
                rightY += 5;

                doc.setFont("times", "bold"); doc.text("Date:", rightColX, rightY);
                doc.setFont("times", "normal"); doc.text(document.getElementById('invoice-date').value, rightValueStart, rightY);
                rightY += 5;

                doc.setFont("times", "bold"); doc.text("Order No.:", rightColX, rightY);
                doc.setFont("times", "normal"); doc.text(document.getElementById('order-no').value, rightValueStart, rightY);
                rightY += 5;

                doc.setFont("times", "bold"); doc.text("E-Way Bill:", rightColX, rightY);
                doc.setFont("times", "normal"); doc.text(document.getElementById('eway-bill').value, rightValueStart, rightY);
                
                const tableTopY = Math.max(currentY, rightY) + 8;
                doc.setDrawColor(180, 180, 180); // Darker grey
                doc.setLineWidth(0.3);
                doc.line(pageMargin, tableTopY - 2, pageWidth - pageMargin, tableTopY - 2);


                // Items Table
                const tableRows = [];
                const itemElements = itemsTableBody.querySelectorAll('tr');
                itemElements.forEach((row, index) => {
                    const rowData = [
                        index + 1,
                        row.querySelector('.item-desc').value,
                        row.querySelector('.item-hsn').value,
                        row.querySelector('.item-qty').value,
                        parseFloat(row.querySelector('.item-rate').value).toFixed(2),
                        row.querySelector('.item-amount').textContent.replace('Rs. ', '')
                    ];
                    tableRows.push(rowData);
                });

                doc.autoTable({
                    head: [['S.No.', 'DESCRIPTION', 'HSN/SAC', 'Qty', 'Rate', 'Amount']],
                    body: tableRows,
                    startY: tableTopY, theme: 'grid',
                    headStyles: { fillColor: [230, 230, 230], textColor: [0,0,0], font: 'times', fontStyle: 'bold', halign: 'center' },
                    bodyStyles: { fontStyle: 'bold', textColor: [0,0,0] },
                    styles: { fontSize: 9, font: 'times', lineColor: [0, 0, 0], lineWidth: 0.1 },
                    columnStyles: {
                        1: { halign: 'left' }, // Description
                        4: { halign: 'right' }, // Rate
                        5: { halign: 'right' } // Amount
                    },
                    margin: { left: pageMargin }
                });

                let itemsTableFinalY = doc.lastAutoTable.finalY;

                // Footer Section
                const footerStartY = itemsTableFinalY + 5;
                const grandTotalValue = document.getElementById('grand-total').textContent;
                
                const totalsTableBody = [
                    ['Total Amount', document.getElementById('subtotal').textContent.replace('Rs. ', '')],
                    ['Freight Charge', (parseFloat(document.getElementById('freight-charge').value) || 0).toFixed(2)],
                    [`Add CGST @ ${document.getElementById('cgst-percent').value}%`, document.getElementById('cgst-amount').textContent.replace('Rs. ', '')],
                    [`Add SGST @ ${document.getElementById('sgst-percent').value}%`, document.getElementById('sgst-amount').textContent.replace('Rs. ', '')],
                    [`Add IGST @ ${document.getElementById('igst-percent').value}%`, document.getElementById('igst-amount').textContent.replace('Rs. ', '')],
                    ['Round Off', (parseFloat(document.getElementById('round-off').value) || 0).toFixed(2)],
                    ['Grand Total', grandTotalValue.replace('Rs. ', '')],
                ];

                doc.autoTable({
                    body: totalsTableBody,
                    startY: footerStartY, theme: 'grid',
                    bodyStyles: { textColor: [0,0,0] },
                    styles: { fontSize: 9, font: 'times', lineColor: [0, 0, 0], lineWidth: 0.1 },
                    columnStyles: { 0: { fontStyle: 'bold' }, 1: { halign: 'right' } },
                    margin: { left: pageMargin + contentWidth / 2 }, tableWidth: contentWidth / 2,
                    didParseCell: function(data) {
                        if (data.row.index === totalsTableBody.length - 1) { // Grand Total Row
                            data.cell.styles.fontStyle = 'bold';
                            data.cell.styles.fillColor = '#F3F4F6'; // Light grey highlight
                        }
                    }
                });
                
                const totalsFinalY = doc.lastAutoTable.finalY;

                let leftColumnY = footerStartY;
                doc.setFontSize(9);
                
                const amountWordsLabel = "Total Invoice Amount in Words:";
                const grandTotalNum = Math.round(parseFloat(grandTotalValue.replace('Rs. ', ''))) || 0;
                const amountWordsValue = numberToWords(grandTotalNum);

                doc.setFont("times", "bold");
                doc.text(amountWordsLabel, pageMargin, leftColumnY);
                doc.setFont("times", "normal");
                const valueText = doc.splitTextToSize(amountWordsValue, contentWidth / 2 - 5);
                doc.text(valueText, pageMargin, leftColumnY + 5);
                leftColumnY += (valueText.length * 4) + 10; // Added extra space for the blank line

                doc.setFont("times", "bold");
                doc.text('Bank Details:', pageMargin, leftColumnY);
                leftColumnY += 5;
                doc.text(`K.K. ENTERPRISES`, pageMargin, leftColumnY);
                leftColumnY += 4;
                doc.setFont("times", "normal");
                doc.text(`A/c No.: 215211100002643`, pageMargin, leftColumnY);
                leftColumnY += 4;
                doc.text(`Bank: UNION BANK OF INDIA, RAEBAREILY ROAD,`, pageMargin, leftColumnY);
                leftColumnY += 4;
                doc.text(`LUCKNOW, U.P.`, pageMargin + doc.getTextWidth('Bank: '), leftColumnY);
                leftColumnY += 4;
                doc.text(`IFSC Code: UBIN0821527`, pageMargin, leftColumnY);

                const bottomSectionY = Math.max(totalsFinalY, leftColumnY) + 10;

                doc.setFont("times", "bold");
                doc.text('Terms & Conditions:', pageMargin, bottomSectionY);
                doc.setFont("times", "normal");
                doc.text('1. E.&.O.E.', pageMargin, bottomSectionY + 4);
                doc.text('2. Goods once sold will not be taken back.', pageMargin, bottomSectionY + 8);
                doc.text('3. All Disputes are subject to Lucknow Jurisdiction Only.', pageMargin, bottomSectionY + 12);
                
                const signatureY = bottomSectionY + 5;
                doc.setFont("times", "bold");
                doc.text('For K. K. ENTERPRISES', pageWidth - pageMargin, signatureY, { align: 'right' });
                doc.line(pageWidth - pageMargin - 60, signatureY + 30, pageWidth - pageMargin, signatureY + 30);
                doc.setFont("times", "normal");
                doc.text('Authorised Signatory', pageWidth - pageMargin, signatureY + 35, { align: 'right' });
                
                const invoiceNo = document.getElementById('invoice-no').value || 'invoice';
                doc.save(`${invoiceNo}.pdf`);
            });

            // Add one row initially
            createRow();
            calculateTotals();
        });
    </script>
</body>
</html>

